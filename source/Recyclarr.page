Menu="Utilities"
Icon="fa-trash-o"
Title="Recyclarr"
---
<?php
require $pageroot."/include/Setup.php";
?>


<!-- Static assets -->
<script>const aceTheme = "<?=(in_array($theme, ['black','gray']) ? 'tomorrow_night' : 'tomorrow')?>";</script>
<script type="text/javascript" async src="<?autov("/plugins/un.recyclarr/assets/ace-1.5.0/ace.js")?>"></script>
<script type="text/javascript" async src="<?autov("/plugins/un.recyclarr/assets/scripts.js")?>"></script>
<link rel="stylesheet" type="text/css" href="<?autov("/plugins/un.recyclarr/assets/styles.css")?>" />


<!-- Crontab settings -->
<div style="margin-top:-30px" id="title">Crontab</div>
<form markdown="1" method="POST" name="crontab">
Run on schedule:
: <select name="schedule">
    <?=mk_option($settings->schedule, "DISABLED", "Disabled")?>
    <?=mk_option($settings->schedule, "HOURLY",   "Hourly")?>
    <?=mk_option($settings->schedule, "DAILY",    "Daily")?>
    <?=mk_option($settings->schedule, "WEEKLY",   "Weekly")?>
    <?=mk_option($settings->schedule, "MONTLY",   "Montly")?>
    <?=mk_option($settings->schedule, "CUSTOM",   "Custom")?>
  </select>
  <input
    name="custom"
    type="text"
    maxlength="20"
    class="narrow <?=$settings->schedule !== "CUSTOM" ? "hidden" : ""?>"
    value="<?=$settings->custom?>"
  />

> **Disabled** Do not run it programatic, only manual<br>
> **Hourly** Runs hourly at 47 minutes after the hour<br>
> **Daily** Runs daily at 4:40 every day<br>
> **Weekly** Runs weekly at 4:30 on the first day of the week<br>
> **Montly** Run monthly  at 4:20 on the first day of the month<br>
> **Custom** Allows you to enter the expression.

<button type="button" name="run">Run now</button>
: <button type="submit" name="apply" disabled>Apply</button>
<span id="response"></span>
</form>


<!-- Configuration files -->
<div id="title">Configuration</div>
<div class="flex">
  <!-- Secrets should always exist -->
  <?=mk_config_file("secrets", "?name=secrets", "warning")?>

  <!-- Loop over configs folder -->
  <?php
    foreach($settings->files as $file) {
      echo mk_config_file(pathinfo($file, PATHINFO_FILENAME), "?name=$file");
    }
  ?>
</div>

<button type="button" name="create">New file</button>
